{% extends "base.html" %}
{% load static %}

{% block content_one %} 

  <!-- Start Cart Page Heading -->
  <section>
    <div class="container">
      <div class="cs_height_80 cs_height_lg_60"></div>
      <div class="cs_shop_page_heading text-center">
        <h1 class="cs_fs_50 cs_bold">Checkout</h1>
        <div class="cs_shop_breadcamp cs_medium">
          <a href="{% url "main:index" %}">Home</a>
          <svg width="17" height="8" viewBox="0 0 17 8" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M16.3536 4.35355C16.5488 4.15829 16.5488 3.84171 16.3536 3.64645L13.1716 0.464467C12.9763 0.269205 12.6597 0.269205 12.4645 0.464467C12.2692 0.659729 12.2692 0.976312 12.4645 1.17157L15.2929 4L12.4645 6.82843C12.2692 7.02369 12.2692 7.34027 12.4645 7.53553C12.6597 7.7308 12.9763 7.7308 13.1716 7.53554L16.3536 4.35355ZM-4.37114e-08 4.5L16 4.5L16 3.5L4.37114e-08 3.5L-4.37114e-08 4.5Z" fill="#5E5E5E"/>
          </svg>
          <a href="{% url "carts:users_cart" %}">Cart</a>
          <svg width="17" height="8" viewBox="0 0 17 8" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M16.3536 4.35355C16.5488 4.15829 16.5488 3.84171 16.3536 3.64645L13.1716 0.464467C12.9763 0.269205 12.6597 0.269205 12.4645 0.464467C12.2692 0.659729 12.2692 0.976312 12.4645 1.17157L15.2929 4L12.4645 6.82843C12.2692 7.02369 12.2692 7.34027 12.4645 7.53553C12.6597 7.7308 12.9763 7.7308 13.1716 7.53554L16.3536 4.35355ZM-4.37114e-08 4.5L16 4.5L16 3.5L4.37114e-08 3.5L-4.37114e-08 4.5Z" fill="#5E5E5E"/>
          </svg>            
          <span>Checkout</span>
        </div>
      </div>
      <div class="cs_height_80 cs_height_lg_60"></div>
    </div>
  </section>
  <!-- End Cart Page Heading -->

  <!-- Start Checkout -->
  <form action="{% url "orders:create_order" %}" method="post">
    {% csrf_token %}
    <div class="container">
      <div class="row">
        <div class="col-xl-7">
          <div class="cs_height_40 cs_height_lg_40"></div>
          <h2 class="cs_checkout-title cs_fs_28">Billing Details</h2>
          <div class="cs_height_45 cs_height_lg_40"></div>
          <div class="row">
            <div class="col-lg-6">
              <label for="id_first_name" class="cs_shop-label">First Name *</label>
              <input type="text" class="cs_shop-input" id="id_first_name" name="first_name" required>
              {% if form.first_name.errors %}
                <div class="alert alert-danger alert-dismissible fade show">{{form.first_name.errors}}</div>
              {% endif %}
            </div>
            <div data-lastpass-icon-root="true" style="position: relative !important; height: 0px !important; width: 0px !important; float: left !important;"></div></div>
            <div class="col-lg-6">
              <label for="id_last_name" class="cs_shop-label">Last Name *</label>
              <input type="text" class="cs_shop-input" id="id_last_name" name="last_name" required>
              {% if form.last_name.errors %}
                <div class="alert alert-danger alert-dismissible fade show">{{form.last_name.errors}}</div>
              {% endif %}
            </div>
            <div class="col-lg-12">
              <label for="id_company_name" class="cs_shop-label">Company name (optional)</label>
              <input type="text" class="cs_shop-input" id="id_company_name" name="company_name">
              {% if form.company_name.errors %}
                <div class="alert alert-danger alert-dismissible fade show">{{form.company_name.errors}}</div>
              {% endif %}
            </div>
            <div class="col-lg-12">
              <label for="id_street_address" class="cs_shop-label">Address *</label>
              <input type="text" id="id_street_address" name="adress" required class="cs_shop-input" placeholder="Введите адресс">
              {% if form.delivery_address.errors %}
                <div class="alert alert-danger alert-dismissible fade show">{{form.delivery_address.errors}}</div>
              {% endif %}
            </div>
            <div class="col-lg-12">
              <label for="city" class="cs_shop-label">Town / City *</label>
              <input type="text" id="id_city" name="city" required class="cs_shop-input">
              {% if form.city.errors %}
                <div class="alert alert-danger alert-dismissible fade show">{{form.city.errors}}</div>
             {% endif %}
            </div>
            <div class="col-lg-12">
              <label for="id_index" class="cs_shop-label">ZIP Code *</label>
              <input type="text" id="id_index" name="index" required class="cs_shop-input">
              {% if form.index_cod.errors %}
                <div class="alert alert-danger alert-dismissible fade show">{{form.index_cod.errors}}</div>
              {% endif %}
            </div>
            <div class="col-lg-12">
              <label for="id_phone" class="cs_shop-label">Phone *</label>
              <input type="text" id="id_phone" name="phone" required class="cs_shop-input">
              {% if form.phone_number.errors %}
                <div class="alert alert-danger alert-dismissible fade show">{{form.phone_number.errors}}</div>
             {% endif %}
            </div>
            <div class="col-lg-12">
              <label for="id_email" class="cs_shop-label">Email address *</label>
              <input type="text" id="id_email" name="email" required class="cs_shop-input">
              {% if form.email.errors %}
                <div class="alert alert-danger alert-dismissible fade show">{{form.email.errors}}</div>
              {% endif %}
            </div>
          </div>
          <div class="cs_height_45 cs_height_lg_45"></div>
          <h2 class="cs_checkout-title">Additional information</h2>
          <div class="cs_height_25 cs_height_lg_25"></div>
          <label for="id_additional_inforation" name="additional_inforation" class="cs_shop-label">Order notes (optional)</label>
          <textarea id="id_additional_inforation" name="additional_inforation" cols="30" rows="6" class="cs_shop-input"></textarea>
          {% if form.additional_inforation.errors %}
            <div class="alert alert-danger alert-dismissible fade show">{{form.additional_inforation.errors}}</div>
          {% endif %}
          <div class="cs_height_30 cs_height_lg_30"></div>
        </div>
      
      <!-- Корзина на странице оформления заказа -->      
        <div class="col-xl-5">
          <div class="cs_shop-side-spacing">
            <div class="cs_shop-card">
              <h2 class="cs_fs_21">Your order</h2>
              <table>
                <tbody>
                  <tr class="cs_semi_bold">
                    <td>Products</td>
                    <td class="text-end">Amount</td>
                  </tr>
                  {% for cart in carts %}
                    <tr>
                      <td>{{cart.product.name}}</td>
                      <td class="text-end">${{cart.product_price}}</td>
                    </tr>
                  {% endfor %}
                  <tr>
                    <td class="cs_semi_bold">Количество</td>
                    <td class="text-end">{{carts.total_quantity}}</td>
                  </tr>
                  <tr class="cs_semi_bold">
                    <td>Total</td>
                    <td class="text-end">${{carts.total_price}}</td>
                  </tr>
                </tbody>
              </table>
      <!-- Конец корзины на странице оформления заказа -->  
      <!-- Оставить заказ + ссылка на оплату -->              
              <div class="cs_height_30 cs_height_lg_30"></div>
              <a href="success.html" class="cs_btn cs_style_1 cs_fs_16 cs_medium w-100">Place Order</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </form>
  <!-- Конец еста для заказа и ссылки на оплату -->      
{% endblock  %}